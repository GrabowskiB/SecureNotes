# SecureNotes - Bezpieczna Aplikacja do ZarzÄ…dzania Notatkami

## Opis Projektu

SecureNotes to zaawansowana aplikacja webowa do bezpiecznego zarzÄ…dzania notatkami, zbudowana z wykorzystaniem Flask i najnowszych standardÃ³w bezpieczeÅ„stwa. Aplikacja oferuje kompleksowÄ… ochronÄ™ danych uÅ¼ytkownikÃ³w poprzez szyfrowanie, podpisy cyfrowe oraz wielopoziomowe mechanizmy uwierzytelniania.

![SecureNotes](homepage.png)

## GÅ‚Ã³wne FunkcjonalnoÅ›ci

### ğŸ” BezpieczeÅ„stwo
- **Szyfrowanie AES**: Notatki mogÄ… byÄ‡ szyfrowane kluczem globalnym
- **Podpisy cyfrowe RSA**: Weryfikacja integralnoÅ›ci i autentycznoÅ›ci notatek
- **Uwierzytelnianie dwuskÅ‚adnikowe (TOTP)**: Dodatkowa warstwa zabezpieczeÅ„
- **Bezpieczne hasÅ‚a**: Walidacja siÅ‚y hasÅ‚a z wymaganiami zÅ‚oÅ¼onoÅ›ci
- **Ochrona przed atakami brute-force**: Ograniczenie liczby prÃ³b logowania
- **CSRF Protection**: Ochrona przed atakami Cross-Site Request Forgery
- **Content Security Policy**: Zabezpieczenie przed atakami XSS

### ğŸ“ ZarzÄ…dzanie Notatkami
- **Tworzenie i edycja**: Intuicyjny edytor z obsÅ‚ugÄ… Markdown
- **UdostÄ™pnianie**: MoÅ¼liwoÅ›Ä‡ udostÄ™pniania notatek innym uÅ¼ytkownikom
- **Notatki publiczne**: Opcja publikowania notatek dla wszystkich
- **PodglÄ…d HTML**: Automatyczna konwersja Markdown do HTML z filtrowaniem
- **Weryfikacja podpisÃ³w**: Sprawdzanie autentycznoÅ›ci notatek

### ğŸ‘¤ ZarzÄ…dzanie UÅ¼ytkownikami
- **Rejestracja z walidacjÄ…**: Kompleksowa weryfikacja danych
- **Reset hasÅ‚a**: Bezpieczny mechanizm resetowania przez email
- **Profil uÅ¼ytkownika**: ZarzÄ…dzanie ustawieniami TOTP
- **Åšledzenie logowaÅ„**: Powiadomienia o logowaniu z nowych adresÃ³w IP

## Architektura Techniczna

### Backend
- **Framework**: Flask 3.1.0
- **Baza danych**: SQLAlchemy z SQLite
- **Kryptografia**: Python Cryptography Library
- **Uwierzytelnianie**: Flask-Login + PyOTP
- **Formularze**: Flask-WTF z walidacjÄ…
- **Email**: SMTP z Gmail

### Frontend
- **Templating**: Jinja2
- **Styling**: Custom CSS z ciemnym motywem
- **ResponsywnoÅ›Ä‡**: Mobile-friendly design
- **Markdown**: Renderowanie z syntax highlighting

### DevOps i Deployment
- **Konteneryzacja**: Docker + Docker Compose
- **Reverse Proxy**: Nginx z SSL/TLS
- **HTTPS**: Certyfikaty SSL (localhost i publiczny IP)
- **Åšrodowisko**: Konfiguracja przez zmienne Å›rodowiskowe

## Instalacja i Uruchomienie

### Wymagania
- Python 3.9+
- Docker i Docker Compose
- Git

### Klonowanie repozytorium
```bash
git clone <repository-url>
cd secure_notes
```

### Konfiguracja Å›rodowiska
1. Skopiuj i edytuj plik `.env`:
```bash
cp .env.example .env
```

2. Skonfiguruj zmienne w pliku [`.env`](.env):
```env
SECRET_KEY=your_super_secret_key
DATABASE_URL=sqlite:///site.db
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your_email@gmail.com
MAIL_PASSWORD=your_app_password
MAIL_FROM=your_email@gmail.com
LOGIN_ATTEMPT_LIMIT=5
LOGIN_DELAY=1
GLOBAL_ENCRYPTION_KEY=16bytesSecretKey
```

### Uruchomienie z Docker
```bash
# Zbuduj i uruchom kontenery
docker-compose up --build

# Aplikacja bÄ™dzie dostÄ™pna pod adresem:
# HTTP: http://localhost:80 (przekierowanie na HTTPS)
# HTTPS: https://localhost:443
```

### Uruchomienie lokalne (development)
```bash
# Zainstaluj zaleÅ¼noÅ›ci
pip install -r requirements.txt

# Uruchom aplikacjÄ™
python run.py
```

## Struktura Projektu

```
secure_notes/
â”œâ”€â”€ secure_notes/                 # GÅ‚Ã³wny pakiet aplikacji
â”‚   â”œâ”€â”€ __init__.py              # Konfiguracja Flask i modele bazy danych
â”‚   â”œâ”€â”€ app.py                   # Punkt wejÅ›cia aplikacji
â”‚   â”œâ”€â”€ forms.py                 # Formularze WTF z walidacjÄ…
â”‚   â”œâ”€â”€ routes/                  # Blueprinty aplikacji
â”‚   â”‚   â”œâ”€â”€ auth.py             # Uwierzytelnianie i autoryzacja
â”‚   â”‚   â”œâ”€â”€ notes.py            # ZarzÄ…dzanie notatkami
â”‚   â”‚   â””â”€â”€ main.py             # GÅ‚Ã³wne strony
â”‚   â”œâ”€â”€ static/                  # Pliki statyczne
â”‚   â”‚   â””â”€â”€ style.css           # Style CSS
â”‚   â””â”€â”€ templates/               # Szablony HTML
â”‚       â”œâ”€â”€ base.html           # Szablon bazowy
â”‚       â”œâ”€â”€ login.html          # Strona logowania
â”‚       â”œâ”€â”€ register.html       # Rejestracja
â”‚       â”œâ”€â”€ notes.html          # Lista notatek
â”‚       â””â”€â”€ ...                 # Inne szablony
â”œâ”€â”€ certs/                       # Certyfikaty SSL
â”œâ”€â”€ instance/                    # Instancja bazy danych
â”œâ”€â”€ docker-compose.yml           # Konfiguracja Docker Compose
â”œâ”€â”€ Dockerfile                   # Definicja kontenera
â”œâ”€â”€ nginx.conf                   # Konfiguracja Nginx
â”œâ”€â”€ requirements.txt             # ZaleÅ¼noÅ›ci Python
â”œâ”€â”€ run.py                      # Punkt uruchomienia
â””â”€â”€ .env                        # Zmienne Å›rodowiskowe
```

## BezpieczeÅ„stwo - SzczegÃ³Å‚y Implementacji

### Szyfrowanie Notatek
- **Algorytm**: AES-256 w trybie CFB
- **Klucz**: Globalny klucz szyfrowania z PBKDF2
- **IV**: Statyczny wektor inicjalizacyjny (16 bajtÃ³w)

### Podpisy Cyfrowe
- **Algorytm**: RSA-2048 z PSS padding
- **Hash**: SHA-256
- **Weryfikacja**: Automatyczna przy wyÅ›wietlaniu notatek

### Klucze UÅ¼ytkownikÃ³w
- **Generowanie**: RSA-2048 par kluczy dla kaÅ¼dego uÅ¼ytkownika
- **Przechowywanie**: Klucz prywatny szyfrowany hasÅ‚em uÅ¼ytkownika
- **Solenie**: Unikalne salt dla kaÅ¼dego klucza

### Ochrona HaseÅ‚
- **Hashing**: Werkzeug PBKDF2 z SHA-256
- **Salt**: Losowy 16-bajtowy salt dla kaÅ¼dego hasÅ‚a
- **Walidacja**: Minimalna dÅ‚ugoÅ›Ä‡, znaki specjalne, cyfry, wielkie/maÅ‚e litery

## API i Endpointy

### Uwierzytelnianie (`/auth`)
- `GET/POST /auth/login` - Logowanie uÅ¼ytkownika
- `GET/POST /auth/register` - Rejestracja nowego uÅ¼ytkownika
- `GET /auth/logout` - Wylogowanie
- `GET/POST /auth/profile` - ZarzÄ…dzanie profilem
- `GET /auth/show_qr/<username>` - WyÅ›wietlanie kodu QR dla TOTP
- `GET/POST /auth/forgot` - Reset hasÅ‚a
- `GET/POST /auth/reset/<token>` - Potwierdzenie resetu hasÅ‚a

### Notatki (`/notes`)
- `GET/POST /notes/` - Lista notatek i dodawanie nowych
- `GET/POST /notes/edit/<id>` - Edycja notatki
- `GET/POST /notes/share/<id>` - UdostÄ™pnianie notatki
- `GET /notes/public` - Publiczne notatki

### GÅ‚Ã³wne (`/`)
- `GET /` - Strona gÅ‚Ã³wna
- `GET /static/<filename>` - Pliki statyczne

## Konfiguracja Produkcyjna

### Nginx SSL
Aplikacja zawiera gotowÄ… konfiguracjÄ™ Nginx z obsÅ‚ugÄ… SSL/TLS:
- Automatyczne przekierowanie HTTP â†’ HTTPS
- ObsÅ‚uga plikÃ³w statycznych
- Proxy dla aplikacji Flask
- Gotowe certyfikaty dla localhost i publicznego IP

### Zmienne Åšrodowiskowe
Wszystkie wraÅ¼liwe dane konfigurowane przez zmienne Å›rodowiskowe:
- Klucze szyfrowania
- Dane SMTP
- Ustawienia bazy danych
- Limity bezpieczeÅ„stwa

### Docker Deployment
```bash
# Produkcyjne uruchomienie
docker-compose -f docker-compose.yml up -d

# Monitoring logÃ³w
docker-compose logs -f

# Aktualizacja
docker-compose pull && docker-compose up -d
```

## Testowanie

### Testy BezpieczeÅ„stwa
1. **Weryfikacja szyfrowania**: Test kompletnego cyklu szyfrowania/deszyfrowania
2. **Podpisy cyfrowe**: Weryfikacja integralnoÅ›ci podpisÃ³w
3. **Uwierzytelnianie**: Test mechanizmÃ³w logowania i TOTP
4. **Walidacja**: Test walidacji formularzy i danych wejÅ›ciowych

### Testy Funkcjonalne
1. **CRUD notatek**: Tworzenie, odczyt, aktualizacja, usuwanie
2. **UdostÄ™pnianie**: Test mechanizmÃ³w udostÄ™pniania
3. **Responsive design**: Test na rÃ³Å¼nych urzÄ…dzeniach

## Troubleshooting

### Typowe Problemy

**BÅ‚Ä…d certyfikatu SSL:**
```bash
# Regeneracja certyfikatÃ³w
openssl req -x509 -newkey rsa:4096 -keyout certs/localhost.key -out certs/localhost.crt -days 365 -nodes
```

**Problemy z bazÄ… danych:**
```bash
# Reset bazy danych
rm instance/site.db
# Aplikacja automatycznie utworzy nowÄ… bazÄ™ przy starcie
```

**BÅ‚Ä™dy SMTP:**
- SprawdÅº czy uÅ¼ywasz App Password dla Gmail
- Weryfikuj ustawienia SMTP w `.env`

## Roadmapa

- [ ] **API REST**: PeÅ‚ne API dla aplikacji mobilnych
- [ ] **WspÃ³Å‚dzielenie zespoÅ‚owe**: Grupy uÅ¼ytkownikÃ³w i uprawnienia
- [ ] **Backup**: Automatyczne kopie zapasowe
- [ ] **Audyt**: Logi dziaÅ‚aÅ„ uÅ¼ytkownikÃ³w
- [ ] **Mobile App**: Dedykowana aplikacja mobilna
- [ ] **Advanced Search**: Wyszukiwanie peÅ‚notekstowe
- [ ] **File Attachments**: ObsÅ‚uga zaÅ‚Ä…cznikÃ³w

## Licencja

Projekt udostÄ™pniony na licencji MIT.

## Autor

Stworzony jako projekt edukacyjny demonstrujÄ…cy zaawansowane techniki bezpieczeÅ„stwa aplikacji webowych.

---

**âš ï¸ OstrzeÅ¼enie**: Ta aplikacja zostaÅ‚a stworzona w celach edukacyjnych. Przed uÅ¼yciem w Å›rodowisku produkcyjnym zaleca siÄ™ przeprowadzenie peÅ‚nego audytu bezpieczeÅ„stwa.